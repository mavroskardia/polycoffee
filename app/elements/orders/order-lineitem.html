<dom-module id="order-lineitem">
    <style>
        person-display {
            font-size: 0.8rem;
            color: #888;
        }
        coffee-display {
            font-style: oblique;
        }
    </style>
    <template>
        <div class="horizontal layout center">
            <div class="flex">
                <template is="dom-if" if="{{item.person}}">
                    <person-display ref="{{item.person}}"></person-display>
                </template>
                <strong>{{item.quantity}}</strong>&times;
                <strong>{{item.size}}</strong>#
                <coffee-display ref="{{item.coffee}}"></coffee-display>
            </div>
            <paper-icon-button icon="clear" class="end" on-tap="removeItem"></paper-icon-button>
        </div>
    </template>
</dom-module>
<script>
    Polymer({
        is: 'order-lineitem',
        behaviors: [
            Polymer.NeonAnimationRunnerBehavior
        ],
        properties: {
            item: Object,
            animationConfig: {
                value: function () {
                    return {
                        'entry': {
                            name: 'fade-in-animation',
                            node: this
                        },
                        'exit': {
                            name: 'fade-out-animation',
                            node: this
                        }
                    };
                }
            }
        },
        listeners: {
            'neon-animation-finish': '_onAnimationFinish'
        },
        attached: function () {
            this.playAnimation('entry', false);
        },
        removeItem: function () {
            this.playAnimation('exit', true);
        },
        _onAnimationFinish: function (e, isRemove) {
            if (isRemove)
                this.fire('remove-item', this.item);
        }
    });
</script>